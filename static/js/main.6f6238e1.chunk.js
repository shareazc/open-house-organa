(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(168)},112:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),c=a.n(r),o=(a(112),a(13)),i=a(14),s=a(16),u=a(15),m=a(17),d=a(44),h=a(38),f=a(105),p=a(19),E=a(25),b=a(85),g=a.n(b),v=a(170),O=function(e){return l.a.createElement(v.a,null,e.children)},j=a(26),y=a(51),k=a.n(y),S=a(86),x=a.n(S),C=a(87),w=a.n(C),N=a(174),B=a(88),I=a.n(B),A=a(89),D=a.n(A);function L(){var e=Object(E.a)(["\n    .modal-content{\n        text-align: center;\n    }\n"]);return L=function(){return e},e}var T=j.a.div(L()),W=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(T,null,l.a.createElement(N.a.Dialog,null,l.a.createElement(N.a.Header,null,l.a.createElement(N.a.Title,null,l.a.createElement("h2",null,"Error"))),l.a.createElement(N.a.Body,null,l.a.createElement("img",{src:D.a,alt:"fail",style:{height:300}}),l.a.createElement("p",null,"Tu c\xf3digo QR es incorrecto.")," ",l.a.createElement("br",null))))}}]),t}(l.a.Component);function P(){var e=Object(E.a)(["\n    .modal-content{\n        text-align: center;\n    }\n"]);return P=function(){return e},e}var F=j.a.div(P()),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={redirect:!1,data:[],totalStudents:0,totalData:[],studentName:[],handleSuccess:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://laboratoria-la.firebaseapp.com/cohorts/gdl-2019-01-bc-core-gdl-002/users").then(function(e){return e.json()}).then(function(t){var a=t.filter(function(e){return"student"===e.role});return e.setState({totalStudents:a.length,totalData:a}),e.findStudent(e.props.scanId,e.state.totalData),a})}},{key:"findStudent",value:function(e,t){var a=t.find(function(t){return t.id===e});if(void 0!==a){var n=a.name;return this.setState({studentName:n}),n}this.setState({studentName:"Fail"})}},{key:"render",value:function(){var e=this.state.studentName;return"Fail"!==e?l.a.createElement(F,null,l.a.createElement(N.a.Dialog,null,l.a.createElement(N.a.Header,null,l.a.createElement(N.a.Title,null,l.a.createElement("h2",null,"\xa1Bienvenida! ",l.a.createElement("h4",null,e)))),l.a.createElement(N.a.Body,null,l.a.createElement("img",{src:I.a,alt:"success",style:{height:300}}),l.a.createElement("p",null,"Tu asistencia ha sido registrada exitosamente.")),l.a.createElement(N.a.Footer,null))):l.a.createElement(W,null)}}]),t}(l.a.Component),z=a(64);z.initializeApp({apiKey:"AIzaSyASTPd1SOP_zzb369dwfWIR-dP7wVCexJk",authDomain:"open-house-organa.firebaseapp.com",databaseURL:"https://open-house-organa.firebaseio.com",projectId:"open-house-organa",storageBucket:"open-house-organa.appspot.com",messagingSenderId:"512283806532",appId:"1:512283806532:web:d879606f6b83049d"});var M=z,J=a(94),q=a.n(J),G=a(177),H=a(33),K=a.n(H);function Q(){var e=Object(E.a)(["\n  * {\n    margin-top: 2rem;\n    margin: auto;\n    text-align: center;\n    border-radius: 1rem;\n  }\n"]);return Q=function(){return e},e}var V=j.a.div(Q()),U={height:"100px",float:"right"},$={height:"8vh",display:"block",margin:"auto"},_=l.a.createElement(q.a,{id:"popover-basic",title:"\xbfNecesitas ayuda?"},l.a.createElement("p",null,"- Coloca el c\xf3digo lo m\xe1s paralelo posible a la c\xe1mara."),l.a.createElement("p",null,"- Limpia y sube el brillo a la pantalla del smartphone."),l.a.createElement("p",null,"- Verifica que el c\xf3digo que escaneas sea correcto."),l.a.createElement("br",null),l.a.createElement("p",null,l.a.createElement("strong",null,"Si el error persiste, busca a unx coach."))),X=K()().format("ll"),Y=M.database().ref("attendance").child(X).child("students"),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={delay:500,result:"",scanner:[],totalData:[]},a.addAttendanceWithConditions=a.addAttendanceWithConditions.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"addAttendanceWithConditions",value:function(e){var t=[],a=[];if(null!=e){this.setState({scanner:e});var n=this.state.totalData.find(function(t){return t.id===e});Y.once("value",function(n){"string"===typeof(t=n.val())||(a=t.find(function(t){return e===t}))}),void 0===n||a===e?this.setState({result:"error"}):(this.setState({result:"true"}),this.actualiceAttendanceInFirebace(e))}}},{key:"handleError",value:function(e){console.error(e)}},{key:"actualiceAttendanceInFirebace",value:function(e){Y.once("value",function(t){Y.set([].concat(Object(f.a)(t.val()),[e]))})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://laboratoria-la.firebaseapp.com/cohorts/gdl-2019-01-bc-core-gdl-002/users").then(function(e){return e.json()}).then(function(t){var a=t.filter(function(e){return"student"===e.role});return e.setState({totalData:a}),a})}},{key:"render",value:function(){var e=this;if("true"===this.state.result)return setTimeout(function(){return e.setState({result:"false"})},3e3),l.a.createElement(R,{scanId:this.state.scanner});if("error"===this.state.result)return setTimeout(function(){return e.setState({result:"false"})},3e3),l.a.createElement(W,null);return l.a.createElement("div",{className:"scannerScreen"},l.a.createElement("br",null),l.a.createElement("img",{className:"brackets",src:x.a,style:{height:100},alt:"LabBrackets"}),l.a.createElement(O,null,l.a.createElement(V,null,l.a.createElement("h1",null,"\xa1Bienvenida!"),l.a.createElement("p",null,"Por favor, escanea tu c\xf3digo QR"),l.a.createElement(g.a,{delay:this.state.delay,style:{width:400},onError:this.handleError,onScan:this.addAttendanceWithConditions})),l.a.createElement(G.a,{trigger:"click",placement:"right",overlay:_},l.a.createElement("img",{className:"info",src:w.a,style:$,alt:"help"}))),l.a.createElement("img",{className:"brackets",src:k.a,style:U,alt:"LabBrackets"}))}}]),t}(n.Component),ee=a(178),te=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(ee.a,{className:"text-center"},l.a.createElement(ee.a.Body,null,l.a.createElement(ee.a.Title,null,"Asistencias"),l.a.createElement(ee.a.Text,null,l.a.createElement("span",{className:"numbers",style:{fontSize:60}},this.props.totalAttendance)),l.a.createElement(ee.a.Text,null,l.a.createElement("small",{className:"text-muted"},"Total de estudiantes ",l.a.createElement("span",{className:"numbers"},this.props.totalStudents)))))}}]),t}(l.a.Component),ae=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.totalStudents-this.props.totalAttendance;return l.a.createElement(ee.a,{className:"text-center"},l.a.createElement(ee.a.Body,null,l.a.createElement(ee.a.Title,null,"Inasistencias"),l.a.createElement(ee.a.Text,null,e)))}}]),t}(l.a.Component),ne=a(171),le=a(97),re=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={date:[],totalAttendance:0,totalStudents:0},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=K()().format("ll"),a=M.database().ref("attendance").child(t).child("students"),n=M.database().ref("totalStudentsInDB");a.on("value",function(t){var a=t.val();for(var n in a)e.setState({date:n,totalAttendance:a.length-1})}),n.on("value",function(t){var a=t.val();e.setState({totalStudents:a.totalStudents})})}},{key:"render",value:function(){return l.a.createElement(v.a,null,l.a.createElement("br",null),l.a.createElement(ne.a,null,l.a.createElement(le.a,{lg:8},l.a.createElement("h1",null,l.a.createElement(te,{totalAttendance:this.state.totalAttendance,totalStudents:this.state.totalStudents}))),l.a.createElement(le.a,{lg:4},l.a.createElement("h2",null,l.a.createElement(ae,{totalAttendance:this.state.totalAttendance,totalStudents:this.state.totalStudents})))))}}]),t}(l.a.Component),ce=a(176),oe=a(175),ie=a(98),se=a.n(ie);function ue(){return l.a.createElement("h5",null," ",K()().format("lll"))}function me(){var e=Object(E.a)(["\n  .navbar {\n    background-color: #ffe521;\n  }\n\n  .h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6{\n    margin-top: .5rem;\n    margin-right:  6rem;\n  }\n"]);return me=function(){return e},e}var de=j.a.div(me()),he=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).logOut=e.logOut.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),M.auth().signOut().then(function(){console.log("sesion cerrada")}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement(de,null,l.a.createElement(ce.a,{expand:"lg"},l.a.createElement(ce.a.Brand,null,l.a.createElement("img",{src:se.a,width:"200",height:"25",alt:"Logo Laboratoria"})),l.a.createElement(ce.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(ce.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(oe.a,{className:"ml-auto"},l.a.createElement(oe.a.Item,null,l.a.createElement(ue,null)),l.a.createElement(oe.a.Item,null,l.a.createElement(oe.a.Link,null,l.a.createElement(d.b,{to:"/"},"Scanner"))),l.a.createElement(oe.a.Item,null,l.a.createElement(oe.a.Link,null,l.a.createElement(d.b,{to:"/summary"},"Resumen"))),l.a.createElement(oe.a.Item,null,l.a.createElement(oe.a.Link,null,l.a.createElement(d.b,{to:"/",onClick:this.logOut},"Cerrar sesi\xf3n")))))))}}]),t}(l.a.Component),fe=function(){return l.a.createElement("h1",null,"No Match")},pe=(a(167),a(104)),Ee=a(173),be=a(172);function ge(){var e=Object(E.a)(["\n  .loginScreen {\n    display: flex;\n    flex-direction: column;\n    height: 80vh;\n    justify-content: space-between;\n  }\n\n  .greeting {\n    align-self: center;\n  }\n\n  .loginForm {\n    align-self: center;\n  }\n\n  .loginButton {\n    height: 100px;\n    text-align: center;\n  }\n"]);return ge=function(){return e},e}var ve=j.a.div(ge()),Oe={height:"100px",float:"right"},je=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState(Object(pe.a)({},t.target.name,t.target.value))},e.login=e.login.bind(Object(p.a)(e)),e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.state={email:"",password:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"login",value:function(e){e.preventDefault(),M.auth().signInWithEmailAndPassword(this.state.email,this.state.password).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement(O,null,l.a.createElement(ve,null,l.a.createElement("div",{className:"loginScreen"},l.a.createElement("div",{className:"greeting"},l.a.createElement("br",null),l.a.createElement("h1",null,"\xa1Bienvenida, Sam!")),l.a.createElement("div",{className:"loginForm"},l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Group,{controlId:"formBasicEmail"},l.a.createElement(Ee.a.Label,null,"Correo"),l.a.createElement(Ee.a.Control,{type:"email",name:"email",onChange:this.handleChange,placeholder:"Ingresa tu correo"}),l.a.createElement(Ee.a.Text,{className:"text-muted"},"No compartiremos tu correo con nadie m\xe1s.")),l.a.createElement(Ee.a.Group,{controlId:"formBasicPassword"},l.a.createElement(Ee.a.Label,null,"Contrase\xf1a"),l.a.createElement(Ee.a.Control,{type:"password",name:"password",onChange:this.handleChange,placeholder:"Ingresa tu contrase\xf1a"})))),l.a.createElement("div",{className:"loginButton"},l.a.createElement(be.a,{variant:"outline-light",type:"submit",onClick:this.login},l.a.createElement("img",{className:"brackets",src:k.a,style:Oe,alt:"LabBrackets"})),l.a.createElement("p",null,"Ingresar")))))}}]),t}(l.a.Component),ye=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={user:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"authListener",value:function(){var e=this;M.auth().onAuthStateChanged(function(t){t?e.setState({user:t}):e.setState({user:null})})}},{key:"doesDateExist",value:function(){var e=K()().format("ll");M.database().ref("attendance").child(e).on("value",function(t){t.exists()||M.database().ref("attendance").child(e).child("students").set("0")})}},{key:"componentDidMount",value:function(){this.authListener(),this.doesDateExist()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(d.a,null,l.a.createElement(he,null),l.a.createElement(h.c,null,l.a.createElement(h.a,{exact:!0,path:"/",render:function(){return e.state.user?l.a.createElement(Z,null):l.a.createElement(je,null)}}),l.a.createElement(h.a,{exact:!0,path:"/summary",component:re}),l.a.createElement(h.a,{path:"/success",component:R}),l.a.createElement(h.a,{component:fe}))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,a){e.exports=a.p+"static/media/PinkBracketsRight.ab37d7c1.png"},86:function(e,t,a){e.exports=a.p+"static/media/PinkBracketsLeft.44a8ef37.png"},87:function(e,t,a){e.exports=a.p+"static/media/information.7273e405.svg"},88:function(e,t,a){e.exports=a.p+"static/media/check-animation-v2.6769f08a.gif"},89:function(e,t,a){e.exports=a.p+"static/media/fail-animation.45aa2f4d.gif"},98:function(e,t,a){e.exports=a.p+"static/media/LaboratorialogoBLK.bcdab9d9.png"}},[[107,1,2]]]);
//# sourceMappingURL=main.6f6238e1.chunk.js.map